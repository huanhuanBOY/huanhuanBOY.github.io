# 22.4458108,113.9966155
# 22.3010341,114.202464,
import math
import json
xxrange = [113.9966155, 114.202464]

yyrange = [22.3010341, 22.4458108]

data = {"Tuen Mun" :"983,255,1434,226,1505,400,1457,773,996,793",
 "Yuen Long" :"1505,390,1814,390,1859,319,1940,325,1985,229,2353,219,2449,309,2459,645,2394,664,2365,722,1473,683",
 "North" :"2353,213,3377,135,3355,435,2456,487,2452,293",
 "Tai Po" :"2469,500,3361,429,3361,703,3161,744,3113,819,2994,828,2443,780,2365,709,2388,654,2469,657",
 "Sai Kung" :"2991,835,3116,819,3113,957,3258,986,3252,1608,2978,1682,2887,1550,2878,1147,2962,1125",
 "Sha Tin" :"2433,777,2668,806,2991,831,2974,980,2952,1115,2269,1099,2253,909,2385,877",
 "Tsuen Wan" :"2359,722,2430,770,2382,870,2246,915,1257,935,1247,780,1450,770,1492,680",
 "Kwai Tsing" :"1737,938,1850,970,1859,1096,2272,1099,2243,925,2040,915",
 "Sham Shui Po" :"1859,1096,1859,1260,2053,1315,2314,1289,2333,1121",
 "Yau Tsim Mong" :"1853,1270,1753,1357,1740,1557,2037,1611,2062,1315",
 "Kowloon City" :"2069,1308,2046,1608,2182,1605,2404,1379,2452,1118,2330,1109,2324,1289",
 "Wong Tai Sin" :"2456,1115,2411,1373,2546,1421,2565,1373,2643,1424,2697,1347,2617,1276,2746,1121,2565,1112",
 "Kwun Tong" :"2407,1376,2188,1608,2462,1618,2546,1424",
 "Central and Western" :"1801,1702,1653,1879,1656,2098,1937,2111,2195,2075,2217,1721",
 "Wan Chai" :"2220,1721,2198,2091,2597,2075,2626,1731",
 "Eastern" :"2626,1737,2597,2072,3165,2111,3190,1892,3010,1760",
 "Southern" :"1843,2120,1998,2159,2066,2282,2427,2288,3103,2278,3155,2240,3165,2117,2610,2066,2185,2085",
 "Island" :"790,1399,1022,1389,1031,1328,973,1299,1015,1118,1115,1047,1183,1057,1247,1121,1341,1070,1386,1092,1421,1121,1421,1392,1302,1415,1089,1698,809,1721",
 "Oversea" :"790,2066,1383,2059,1424,2111,1424,2717,777,2733"
 }
newdata = {}
tmpx = []
tmpy = []
for name in data:
    t = data[name].split(",")
    x = []
    y = []
    for i in range(0, len(t), 2):
        x.append(int(t[i]))
        y.append(int(t[i+1]))
        tmpx.append(int(t[i]))
        tmpy.append(int(t[i+1]))
    newdata[name] = [x, y]

mxx = max(tmpx)
minx = min(tmpx)
mxy = max(tmpy)
miny = min(tmpy)
xs = (xxrange[1] - xxrange[0])/float((mxx - minx))
ys = (yyrange[1] - yyrange[0])/float((mxy - miny))
index = 0
finaldata = []
for name in newdata:
    tp = []
    index += 1
    for i in range(0, len(newdata[name][0])):
        newdata[name][0][i] = (newdata[name][0][i] - minx) * xs + xxrange[0]
        newdata[name][1][i] = (mxy - newdata[name][1][i]) * ys + yyrange[0]
        tp.append([newdata[name][0][i], newdata[name][1][i]])
    item = {
            'type': 'Feature',
            'properties': {
                'id': index,
                'name': name
            },
            'geometry': {
                'type': 'Polygon',
                'coordinates': [
                    tp
                ]
            }
    }
    finaldata.append(item)
print(finaldata)
t = json.dumps(finaldata, indent=4)
with open("test.txt", "w+") as f:
    f.write(t)
